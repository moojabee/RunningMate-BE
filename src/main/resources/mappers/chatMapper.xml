<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lswr.demo.model.dao.ChatMapper">

	<!-- 1. 유저가 속한 채팅방 목록 조회 -->
	<select id="selectChatRoomList" parameterType="long"
		resultType="ChatRoom">
		SELECT cr.room_id, cr.room_name, cr.type
		FROM ChatRoom
		INNER JOIN Party p ON cr.room_id = p.room_id
		WHERE p.user_id = #{userId}
	</select>
	
	<!-- 2. 오픈 채팅방 목록 조회 -->
	<select id="selectOpenChatRoomList" resultType="ChatRoom">
        SELECT room_id, room_name, type
        FROM ChatRoom
        WHERE type = 'OPEN'
    </select>
    
    <!-- 3. 채팅방 생성 -->
    <insert id="createChatRoom" parameterType="ChatRoom">
        INSERT INTO ChatRoom (room_id, room_name, type)
        VALUES (#{roomId}, #{roomName}, #{type})
    </insert>
    
</mapper>